<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <section name="castle"  type="Castle.Windsor.Configuration.AppDomain.CastleSectionHandler, Castle.Windsor" />
        <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
    </configSections>

    <appSettings>
        <add key="SqlMigration.Contracts.ISqlRunner" value="SqlMigration.SqlRunner"/>
        <add key="SqlMigration.Contracts.IFileIO" value="SqlMigration.FileIO"/>
        <add key="SqlMigration.Contracts.IMigrationHelper" value="SqlMigration.MigrationHelper"/>
        <add key="SqlMigration.Contracts.IMigrationTaskFactory" value="SqlMigration.Factories.MigrationTaskFactory"/>
        <add key="System.Data.IDbConnection" value="System.Data.SqlClient.SqlConnection, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
    </appSettings>

    <castle>
        <facilities>
            <facility
                id="logging"
                type="Castle.Facilities.Logging.LoggingFacility, Castle.Facilities.Logging"
                loggingApi="log4net" />
        </facilities>
        <components>
            <component
                id="runSqlTask"
                type="SqlMigration.Tasks.RunSqlFileTask, SqlMigration"
                lifestyle="transient">
            </component>

            <component
               id="deploymentTask"
               type="SqlMigration.Tasks.DeploymentTask, SqlMigration"
               lifestyle="transient">
            </component>

            <component
               id="migrateTask"
               type="SqlMigration.Tasks.MigrateDatabaseForwardTask, SqlMigration"
               lifestyle="transient">
            </component>

            <component
               id="fileIO"
               service="SqlMigration.Contracts.IMigrationHelper, SqlMigration"
               type="SqlMigration.MigrationHelper, SqlMigration"
               lifestyle="transient">
            </component>

            <component
               id="fileIOWrapper"
               service="SqlMigration.Contracts.IFileIO, SqlMigration"
               type="SqlMigration.FileIO, SqlMigration"
               lifestyle="transient">
            </component>

            <component
               id="sqlRunner"
               service="SqlMigration.Contracts.ISqlRunner, SqlMigration"
               type="SqlMigration.SqlRunner, SqlMigration"
               lifestyle="transient">
            </component>

            <!--<component
               id="dbConnection"
               service="System.Data.IDbConnection, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
               type="System.Data.SqlClient.SqlConnection, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
               lifestyle="transient">
            </component>-->

            <component
                id="tsqlMigration"
                type="SqlMigration.TSqlMigration, SqlMigration"
                lifestyle="transient">
            </component>
        </components>
    </castle>

    <log4net>
        <appender name="ConsoleAppender" type="log4net.Appender.ConsoleAppender" >
            <layout type="log4net.Layout.PatternLayout">
                <param name="ConversionPattern" value="%message%n" />
            </layout>
        </appender>

        <root>
            <level value="ALL" />
            <appender-ref ref="ConsoleAppender" />
        </root>
    </log4net>

</configuration>